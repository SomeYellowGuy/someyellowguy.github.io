(()=>{var e,l,t,r,n={28:(e,l,t)=>{"use strict";var r=t(8081),n=t.n(r),o=t(3645),a=t.n(o),s=t(1667),i=t.n(s),c=new URL(t(2022),t.b),f=new URL(t(3522),t.b),h=new URL(t(4950),t.b),u=a()(n()),d=i()(c),p=i()(f),g=i()(h);u.push([e.id,"@font-face {\r\n    font-family: 'Noto Sans';\r\n    src: url("+d+") format(\"ttf\");\r\n}\r\n\r\n@font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url("+p+") format(\"ttf\");\r\n}\r\n\r\n@font-face {\r\n    font-family: 'Segoe UI Semibold';\r\n    src: url("+g+') format("ttf");\r\n}',""])},3645:e=>{"use strict";e.exports=function(e){var l=[];return l.toString=function(){return this.map((function(l){var t="",r=void 0!==l[5];return l[4]&&(t+="@supports (".concat(l[4],") {")),l[2]&&(t+="@media ".concat(l[2]," {")),r&&(t+="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {")),t+=e(l),r&&(t+="}"),l[2]&&(t+="}"),l[4]&&(t+="}"),t})).join("")},l.i=function(e,t,r,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(a[i]=!0)}for(var c=0;c<e.length;c++){var f=[].concat(e[c]);r&&a[f[0]]||(void 0!==o&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=o),t&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=t):f[2]=t),n&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=n):f[4]="".concat(n)),l.push(f))}},l}},1667:e=>{"use strict";e.exports=function(e,l){return l||(l={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),l.hash&&(e+=l.hash),/["'() \t\n]|(%20)/.test(e)||l.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},8760:(e,l,t)=>{var r={"./levels/1.json":[3811,3811],"./levels/10.json":[7779,7779],"./levels/100.json":[8291,8291],"./levels/101.json":[8054,8054],"./levels/102.json":[8013,8013],"./levels/103.json":[2307,2307],"./levels/104.json":[4324,4324],"./levels/105.json":[3458,3458],"./levels/106.json":[3452,3452],"./levels/107.json":[3010,3010],"./levels/108.json":[7889,7889],"./levels/109.json":[233,233],"./levels/11.json":[6177,6177],"./levels/110.json":[2362,2362],"./levels/111.json":[7942,7942],"./levels/112.json":[9707,9707],"./levels/113.json":[3999,3999],"./levels/114.json":[9109,9109],"./levels/115.json":[3743,3743],"./levels/116.json":[5183,5183],"./levels/12.json":[2310,2310],"./levels/13.json":[8948,8948],"./levels/14.json":[4613,4613],"./levels/15.json":[1137,1137],"./levels/16.json":[5521,5521],"./levels/17.json":[4363,4363],"./levels/18.json":[9136,9136],"./levels/19.json":[9350,9350],"./levels/2.json":[6742,6742],"./levels/20.json":[6566,6566],"./levels/21.json":[5392,5392],"./levels/22.json":[3146,3146],"./levels/23.json":[5561,5561],"./levels/24.json":[6684,6684],"./levels/25.json":[9115,9115],"./levels/26.json":[3253,3253],"./levels/27.json":[9595,9595],"./levels/28.json":[1924,1924],"./levels/29.json":[8920,8920],"./levels/3.json":[9534,9534],"./levels/30.json":[9988,9988],"./levels/31.json":[3024,3024],"./levels/32.json":[7724,7724],"./levels/33.json":[2555,2555],"./levels/34.json":[9423,9423],"./levels/35.json":[3043,3043],"./levels/36.json":[4,4],"./levels/37.json":[307,307],"./levels/38.json":[5394,5394],"./levels/39.json":[1789,1789],"./levels/4.json":[9426,9426],"./levels/40.json":[4437,4437],"./levels/41.json":[2036,2036],"./levels/42.json":[9522,9522],"./levels/43.json":[2903,2903],"./levels/44.json":[6670,6670],"./levels/45.json":[3256,3256],"./levels/46.json":[2787,2787],"./levels/47.json":[6372,6372],"./levels/48.json":[7048,7048],"./levels/49.json":[7886,7886],"./levels/5.json":[7173,7173],"./levels/50.json":[8462,8462],"./levels/51.json":[9813,9813],"./levels/52.json":[4351,4351],"./levels/53.json":[5164,5164],"./levels/54.json":[7310,7310],"./levels/55.json":[637,637],"./levels/56.json":[7624,7624],"./levels/57.json":[3430,3430],"./levels/58.json":[8703,8703],"./levels/59.json":[515,515],"./levels/6.json":[5757,5757],"./levels/60.json":[868,868],"./levels/61.json":[7781,7781],"./levels/62.json":[7412,7412],"./levels/63.json":[5764,5764],"./levels/64.json":[9495,9495],"./levels/65.json":[132,132],"./levels/66.json":[309,309],"./levels/67.json":[1034,1034],"./levels/68.json":[8648,8648],"./levels/69.json":[7589,7589],"./levels/7.json":[6915,6915],"./levels/70.json":[2945,2945],"./levels/71.json":[7486,7486],"./levels/72.json":[9214,9214],"./levels/73.json":[8115,8115],"./levels/74.json":[6896,6896],"./levels/75.json":[8970,8970],"./levels/76.json":[9375,9375],"./levels/77.json":[2681,2681],"./levels/78.json":[2693,2693],"./levels/79.json":[8514,8514],"./levels/8.json":[9078,9078],"./levels/80.json":[7519,7519],"./levels/81.json":[6993,6993],"./levels/82.json":[4587,4587],"./levels/83.json":[7815,7815],"./levels/84.json":[2815,2815],"./levels/85.json":[914,914],"./levels/86.json":[3952,3952],"./levels/87.json":[2674,2674],"./levels/88.json":[3029,3029],"./levels/89.json":[8961,8961],"./levels/9.json":[73,73],"./levels/90.json":[5172,5172],"./levels/91.json":[9347,9347],"./levels/92.json":[4489,4489],"./levels/93.json":[3033,3033],"./levels/94.json":[1507,1507],"./levels/95.json":[4084,4084],"./levels/96.json":[5066,5066],"./levels/97.json":[9245,9245],"./levels/98.json":[7819,7819],"./levels/99.json":[5550,5550],"./test_levels/1.json":[2287,2287],"./test_levels/2.json":[5050,5050],"./test_levels/3.json":[9314,9314],"./test_levels/4.json":[2723,2723],"./test_levels/5.json":[2321,2321],"./test_levels/6.json":[133,133],"./test_levels/7.json":[7447,7447],"./test_levels/8.json":[9103,9103]};function n(e){if(!t.o(r,e))return Promise.resolve().then((()=>{var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}));var l=r[e],n=l[0];return t.e(l[1]).then((()=>t.t(n,19)))}n.keys=()=>Object.keys(r),n.id=8760,e.exports=n},2022:(e,l,t)=>{"use strict";e.exports=t.p+"a50ccd7ec8e550220297.ttf"},4950:(e,l,t)=>{"use strict";e.exports=t.p+"6e8b789f42105e109003.ttf"},3522:(e,l,t)=>{"use strict";e.exports=t.p+"55d336ac99f56921ab9f.ttf"}},o={};function a(e){var l=o[e];if(void 0!==l)return l.exports;var t=o[e]={id:e,exports:{}};return n[e](t,t.exports,a),t.exports}a.m=n,a.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return a.d(l,{a:l}),l},l=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var n=Object.create(null);a.r(n);var o={};e=e||[null,l({}),l([]),l(l)];for(var s=2&r&&t;"object"==typeof s&&!~e.indexOf(s);s=l(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,a.d(n,o),n},a.d=(e,l)=>{for(var t in l)a.o(l,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((l,t)=>(a.f[t](e,l),l)),[])),a.u=e=>e+".circle-match.bundle.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),t={},r="circle-match:",a.l=(e,l,n,o)=>{if(t[e])t[e].push(l);else{var s,i;if(void 0!==n)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var h=c[f];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+n){s=h;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+n),s.src=e),t[e]=[l];var u=(l,r)=>{s.onerror=s.onload=null,clearTimeout(d);var n=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(r))),l)return l(r)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),i&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var l=a.g.document;if(!e&&l&&(l.currentScript&&(e=l.currentScript.src),!e)){var t=l.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=document.baseURI||self.location.href;var e={179:0};a.f.j=(l,t)=>{var r=a.o(e,l)?e[l]:void 0;if(0!==r)if(r)t.push(r[2]);else{var n=new Promise(((t,n)=>r=e[l]=[t,n]));t.push(r[2]=n);var o=a.p+a.u(l),s=new Error;a.l(o,(t=>{if(a.o(e,l)&&(0!==(r=e[l])&&(e[l]=void 0),r)){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;s.message="Loading chunk "+l+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,r[1](s)}}),"chunk-"+l,l)}};var l=(l,t)=>{var r,n,[o,s,i]=t,c=0;if(o.some((l=>0!==e[l]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);i&&i(a)}for(l&&l(t);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0},t=self.webpackChunkcircle_match=self.webpackChunkcircle_match||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})(),(()=>{"use strict";const e=a.p+"073ca3a6340df24f7bbf.png",l=a.p+"ea62f04c89e2e16221eb.png",t={redCircle:{x:0,y:0},yellowCircle:{x:128,y:0},blueCircle:{x:64,y:0},greenCircle:{x:0,y:64},orangeCircle:{x:64,y:64},purpleCircle:{x:128,y:64},redVSCircle:{x:0,y:128},yellowVSCircle:{x:128,y:128},blueVSCircle:{x:64,y:128},greenVSCircle:{x:0,y:192},orangeVSCircle:{x:64,y:192},purpleVSCircle:{x:128,y:192},redHSCircle:{x:192,y:0},yellowHSCircle:{x:320,y:0},blueHSCircle:{x:256,y:0},greenHSCircle:{x:192,y:64},orangeHSCircle:{x:256,y:64},purpleHSCircle:{x:320,y:64},redRSCircle:{x:192,y:128},yellowRSCircle:{x:320,y:128},blueRSCircle:{x:256,y:128},greenRSCircle:{x:192,y:192},orangeRSCircle:{x:256,y:192},purpleRSCircle:{x:320,y:192},redAVSCircle:{x:0,y:128},yellowAVSCircle:{x:128,y:128},blueAVSCircle:{x:64,y:128},greenAVSCircle:{x:0,y:192},orangeAVSCircle:{x:64,y:192},purpleAVSCircle:{x:128,y:192},redAHSCircle:{x:192,y:0},yellowAHSCircle:{x:320,y:0},blueAHSCircle:{x:256,y:0},greenAHSCircle:{x:192,y:64},orangeAHSCircle:{x:256,y:64},purpleAHSCircle:{x:320,y:64},redARSCircle:{x:192,y:128},yellowARSCircle:{x:320,y:128},blueARSCircle:{x:256,y:128},greenARSCircle:{x:192,y:192},orangeARSCircle:{x:256,y:192},purpleARSCircle:{x:320,y:192},button1:{x:0,y:334},button2:{x:64,y:334},button3:{x:128,y:334},drain1:{x:0,y:399,s:65},drain2:{x:65,y:399,s:65},bubble1:{x:131,y:399,s:65},bubble2:{x:196,y:399,s:65},bubble3:{x:261,y:399,s:65},boardTile:{x:0,y:256,s:80},spawnIndicator:{x:144,y:256,s:64},telEnterIndicator:{x:326,y:400,s:64},telExitIndicator:{x:390,y:400,s:64},rainbowCircle:{x:80,y:256},globeHolder:{x:0,y:464},globe:{x:66,y:464},globeExit:{x:187,y:464},cannonBody:{x:466,y:407},buttonOrder:{x:197,y:345,s:55},red_circleOrder:{x:221,y:258,s:56},blue_circleOrder:{x:282,y:258,s:56},yellow_circleOrder:{x:341,y:289,s:56},green_circleOrder:{x:317,y:344,s:56},orange_circleOrder:{x:383,y:219,s:56},purple_circleOrder:{x:377,y:343,s:56},rainbow_circleOrder:{x:384,y:165,s:56},striped_circleOrder:{x:384,y:51,s:56},horizontal_striped_circleOrder:{x:384,y:51,s:56},vertical_striped_circleOrder:{x:504,y:114,s:56},radial_circleOrder:{x:384,y:109,s:56},metal_ballOrder:{x:504,y:0,s:56},scoreOrder:{x:504,y:54,s:56},globeOrder:{x:131,y:464,s:56},watermelonOrder:{x:454,y:473,s:56},metalBall1:{x:440,y:0},metalBall2:{x:440,y:64},metalBall3:{x:440,y:128},metalBall4:{x:440,y:192},metalBall5:{x:440,y:256},metalBall6:{x:440,y:320},watermelon1:{x:262,y:464},watermelon2:{x:326,y:464},watermelon3:{x:390,y:464},star1:{x:505,y:235,s:55},star2:{x:505,y:290,s:55},star3:{x:505,y:345,s:55},starDisabled:{x:504,y:176,s:56}},r=a.p+"dfacba6363e15d4f8841.png",n=a.p+"27179c5ab9e45cf5d856.png",o=1280,s=720,i="blue.green.orange.purple.red.yellow".split("."),c=150,f={red_circle:0,blue_circle:0,yellow_circle:0,green_circle:0,orange_circle:0,purple_circle:0,rainbow_circle:0,striped_circle:0,radial_circle:0,metal_ball:0,watermelon:0,globe:0},h=["metalBall1","metalBall2","metalBall3","metalBall4","metalBall5","metalBall6","globeHolder",null,void 0,void 0],u=["metalBall1","metalBall2","metalBall3","metalBall4","metalBall5","metalBall6","none",null,void 0,void 0],d={scores:[],reachedLevel:1},p="#666666",g=[];a(28);const m=document.createElement("canvas"),b=m.getContext("2d");let y=9,v=9,w=482,x=42,S=!1,j=0,C=[],k=[],M=[];const I=["blueCircle","greenCircle","orangeCircle","purpleCircle","redCircle","yellowCircle"];let _={down:null,justDown:!1,up:null,move:[0,0],held:!1,m:[1,1],swipeStatus:0,swipeFrom:[0,0],swipeTo:[0,0]},D=!1,T=!0,R=[1e4,2e4,3e4],A=!1,B=[],O=null,E=!1,P=null,V=0,H=null,W=!1,L=100,U=100,N=[];const F=function(e){const l=z(m,e);_.up=[l.x*o/_.m[0],l.y*s/_.m[1]],_.held=!1},Y=function(e){const l=z(m,e);_.justDown=!0,_.down=[l.x*o/_.m[0],l.y*s/_.m[1]],_.held=!0},$=function(e){const l=z(m,e);_.move=[l.x*o/_.m[0],l.y*s/_.m[1]]};function z(e,l){var t=e.getBoundingClientRect();return{x:l.clientX-t.left,y:l.clientY-t.top}}let J=new Date,G=!1,X=[],q=!0,K=[],Q=3,Z=f,ee={...f,button:0},le=0,te=0,re=1,ne=!1,oe=null,ae=!1,se=new Date,ie=[],ce=[],fe=[],he=[],ue=[],de=[],pe=6,ge=null,me=new Date,be=[0,0],ye=[0,0],ve=new Image;ve.src=r;let we,xe,Se=[],je=1,Ce=!1,ke=!1,Me=!1,Ie=0,_e=Array(...Array(c)).map((()=>p)),De=Array(...Array(c)).map((()=>[1,2,3])),Te=d;try{window.localStorage&&(localStorage.getItem("circle.match.save")?(console.log("Restoring progress!"),Te=JSON.parse(localStorage.getItem("circle.match.save"))):(console.log("Generating save!"),localStorage.setItem("circle.match.save",JSON.stringify(d)),Te=d))}catch(e){console.warn("Your user settings don't allow local storage to be used! The game won't be able to save progress.\n("+e+")")}let Re=0,Ae=[],Be=50,Oe=[null,null,null],Ee=[],Pe=!1,Ve=!1,He=!1,We=0,Le=0,Ue=[...Array(c)].map(((e,l)=>0)),Ne=0,Fe=new Image;Fe.src=e;let Ye=new Image;Ye.src=l;let $e=new Image;function ze(){try{localStorage.setItem("circle.match.save",JSON.parse(Te))}catch(e){}if(function(){const e=o/s;let l,t,r,n,a=window.innerHeight,i=window.innerWidth;a*e<i?(l=a,t=a*e):(t=i,l=i/e),m.style.width=t+"px",m.style.height=l+"px",_.m[0]=t,_.m[1]=l,r=(i-t)/2,n=(a-l)/2,m.style.left=r+"px",m.style.top=n+"px"}(),Pe){b.drawImage(Fe,0,0,o,s),b.drawImage(Ye,200*Ne,0,200,576,0,0,240,s);let e=0;Q<=5&&(e=12*Math.sin(new Date/190)),b.font="bold "+(100*(1-Math.min(1,(new Date-V)/200)**1.02)+100+e)+"px Segoe UI",b.textAlign="center";let l=Ne>1?255:0;if(b.fillStyle="rgba("+l+","+l+","+l+",0.9)",W){b.beginPath();let e=115,t=130;b.fillStyle="rgba("+l+","+l+","+l+",0.4)",b.arc(e,t,70,0,2*Math.PI),b.fill(),b.beginPath(),b.fillStyle="rgba("+l+","+l+","+l+",0.5)",b.moveTo(e,t),b.save(),b.translate(e,t),b.rotate(3*Math.PI/2),b.arc(0,0,70,-L/U*Math.PI*2,0),b.translate(-e,-t),b.restore(),b.lineTo(e,t),b.fill(),l=255-l,b.fillStyle="rgba("+l+","+l+","+l+",0.9)";const r=Math.floor((L+1)/60),n=Math.ceil(L%60)%60;b.font="50px Segoe UI Semibold",b.fillText((r>=10?"":"0"+r)+":"+(n>=10?"":"0")+n,e,t+15)}else b.fillText(Q,110,180),l=255-l;l=255-l,b.fillStyle="rgba("+l+","+l+","+l+",0.9)",b.font="40px Segoe UI Semibold",b.textAlign="left",b.fillText("◍ "+je,30,50),b.fillStyle="rgba(0,0,0,0.5)";let r=new Path2D;if(r.roundRect(15,210,200,310,12),b.fill(r),Be=Ae.length<=3?80:50,Re%3==0)for(let e in{...f,button:0}){let l=k.filter((l=>l.type===e));l.length>0&&(M.push(l[0]),k=k.filter((e=>e.id!==l[0].id)),setTimeout((()=>{ee[e]++}),800))}!function(){A=!0;let e=[];for(let l=0;l<Ae.length;l++){let r=Ae[l],n=0,o=t[r.type+"Order"],a=0;if(r.lastCollected){const e="score"===r.type?900:300,l="score"===r.type?1.3:2.2;a+=Math.max(8*(1-((new Date-r.lastCollected)/e)**l),0)}b.drawImage(ve,o.x,o.y,o.s,o.s,22-a/2,222+l*Be-a/2,40*Be/50+a,40*Be/50+a),e.push({type:r.type,x:22,y:222+l*Be,size:40*Be/50});let s=0,i=0;switch(r.type){case"button":const e=ee.button||0;if(r.amount&&0!==r.amount){b.fillStyle="white",s=Math.max(0,r.amount-e),i=r.amount-(Ie-ce.flat().reduce(((e,l)=>e+l),0));break}s=Ie-e,i=ce.flat().reduce(((e,l)=>e+l),0),b.fillStyle="#ccdae8";break;case"score":b.fillStyle="#ffdddd",s=R[0]-le,i=R[0]-le;break;default:b.fillStyle="white",s=Math.max(0,r.amount-ee[r.type]),i=Math.max(0,r.amount-Z[r.type])}if(s>=1e3&&Ae.length<=3&&(n=20),b.font=36*Be/50-n+"px Segoe UI Semibold",(i>0||!D)&&(A=!1),s>0)s>=1e6?s=Math.floor(s/1e6*100)/100+"M":s>=1e5&&(s=Math.floor(s/1e3*10)/10+"K"),b.fillText(s,70+(Be-50)/1.7,255+l*Be+(Be-50)/1.7);else{r.completion||(r.completion=new Date);const e=(1-Math.min(1,(new Date-r.completion)/250))**2*Be+40;let t=e-40;b.drawImage(ve,254,344,56,56,70-t/2+(Be-50)/1.7,221+l*Be-t/2+(Be-50)/1.7,e,e)}}for(let l=0;l<M.length;l++){let r,n=M[l];n.startDate||(n.startDate=new Date),"score"!==n.type?(r=ul(n.x,n.y,w,x,64),r[0]+=32,r[0]+=32):r=[k.x/2,k.y/2];const o=e.filter((e=>e.type===n.type))[0];let a=[o.x,o.y];Ae.length<4&&(a[0]+=8,a[1]+=6);const s=1.7;let i=(1-Math.min((new Date-n.startDate)/("score"===n.type?1250:750),1))**s,c="boardTile";n.type,c=n.wasTile;const f=t[c],h=Ae.length>3?o.size:50;if(b.drawImage(ve,f.x,f.y,f.s||64,f.s||64,i*r[0]+(1-i)*a[0],i*r[1]+(1-i)*a[1],h,h),new Date-n.startDate>800){M=M.filter((e=>e.id!==n.id));for(let e=0;e<Ae.length;e++)Ae[e].type===n.type&&(Ae[e].lastCollected=new Date)}}}(),b.fillStyle="rgba(0,0,0,0.3)",r=new Path2D,r.roundRect(15,530,200,30,12),b.fill(r),r=new Path2D;const n=Math.min(le/R[2]*200,200);b.fillStyle="rgba(255,255,255,0.8)",r.roundRect(15,530,Math.max(n,30),30,12),b.fill(r),b.fillStyle="black",b.font="32px Segoe UI Semibold",b.textAlign="center",b.strokeStyle="#222";for(let e=0;e<3;e++){let l=R[e],r=Math.min(l/R[2]*200,200);b.lineWidth=Oe[e]?4:2,b.beginPath(),b.moveTo(15+Math.max(r,30),530),b.lineTo(15+Math.max(r,30),560),b.stroke();const n=t["star"+(4-(e+1))];let o=35,a=0;const s=1.8;if(le>=R[e]&&!Oe[e]&&(pl("score",15+Math.max(r,30)-o/2,565,"star3"),Oe[e]=new Date),Oe[e]){a=Math.min(((new Date-Oe[e])/300)**s,1),o*=2.01-a,b.save();let l=15+Math.max(r,30),t=565+o/2;b.translate(l,t),b.rotate(2*(2-a-1)),b.translate(-l,-t)}b.drawImage(ve,n.x,n.y,n.s,n.s,15+Math.max(r,30)-o/2,565,o,o),Oe[e]&&b.restore()}if(b.fillText(le,115,556),Ve){if(function(e){for(let e=0;e<v;e++)for(let l=0;l<y;l++){let r=ul(l,e,w,x,72);"none"!==xe[e][l]&&b.drawImage(ve,0,256,78,78,r[0]-72+32-8,r[1]-72+32-8,78,78),ie.some((t=>t[0]===l&&t[1]===e))&&b.drawImage(ve,146,256,76,76,r[0]-72+32-8,r[1]-72+32-8,76,76),ce[e][l]>0&&b.drawImage(ve,66*ce[e][l]-66,334,64,64,r[0]-72+32-2,r[1]-72+32-2,68,68);const n=he[e][l];if(n[0]){const e=t.telEnterIndicator;b.drawImage(ve,e.x,e.y,e.s,e.s,r[0]-72+32-8,r[1]-72+32-8,76,76)}if(n[1]){const e=t.telExitIndicator;b.drawImage(ve,e.x,e.y,e.s,e.s,r[0]-72+32-8,r[1]-72+32-8,76,76)}if(de?.[e]?.[l].length>0){const n=t.cannonBody;b.drawImage(ve,n.x,n.y,64,64,r[0]-72+32-8,r[1]-72+32-8-36,76,76);let o=40/de?.[e]?.[l].length,a=1;for(let n of de?.[e]?.[l]){const s=t[n+"Order"];b.drawImage(ve,s.x,s.y,s.s,s.s,r[0]-72+32-8+a*o-(de?.[e]?.[l].length<2?14:3),r[1]-72+32-8-24,26,26),a++}}ue.some((t=>t[0]===l&&t[1]===e))&&b.drawImage(ve,187,464,64,64,r[0]-72+32-8,r[1]-72+32-8,76,76)}for(let e=0;e<v;e++)for(let l=0;l<y;l++){const r=500;let n,o=E?3:1.7,a=E?1:0,s=ul(l,e,w,x,72);if(new Date-me<r&&ke){let t=1-Math.min(r,new Date-V)/r,n=[ye[0]-be[0],ye[1]-be[1]],i=(t+a)/(E?2:1);l===be[0]&&e===be[1]&&(s=ul(l+n[0]*i**o,e+n[1]*i**o,w,x,72)),l===ye[0]&&e===ye[1]&&(s=ul(l-n[0]*i**o,e-n[1]*i**o,w,x,72))}if(!xe[e][l]||"none"===xe[e][l])continue;if(n="ExtraTimeCircle"===xe[e][l].slice(-15)?t[xe[e][l].slice(0,-15)+"Circle"]:t[xe[e][l]],!n)continue;let i=(n?n.s:null)||64;(X.some((t=>t[0]===e&&t[1]===l))||K.filter((t=>t[0]===e&&t[1]===l)).length>=1)&&(b.globalAlpha=.8);let c=0,f=0,h=0;if("rainbowCircle"===xe[e][l]&&(b.save(),c=s[0]-8,f=s[1]-8,b.translate(c,f),fe[e][l]?b.rotate(Math.PI/4):b.rotate(Math.sin((new Date).getTime()/500)/4+1*Math.PI/4),b.translate(-c,-f)),xe[e][l].startsWith("watermelon")&&"watermelon3"!==xe[e][l]&&(b.save(),c=s[0]-8,f=s[1]-8,b.translate(c,f),fe[e][l]||b.rotate(Math.sin((new Date).getTime()/1e3)/2),b.translate(-c,-f)),xe[e][l].startsWith("metalBall")&&(h=6),xe[e][l].startsWith("watermelon")&&(h=4),"globeHolder"===xe[e][l]&&(h=15),b.drawImage(ve,n.x,n.y,i,i,s[0]-72+32+4-h/2,s[1]-72+32+4-h/2,56+h,56+h),"watermelon3"===xe[e][l]||"rainbowCircle"!==xe[e][l]&&"globeHolder"!==xe[e][l]&&!xe[e][l].startsWith("watermelon")||b.restore(),"ExtraTimeCircle"===xe[e][l].slice(-15)){b.font="20px Segoe UI Semibold";const e=s[0]-72+32+4-h/2+40,l=s[1]-72+32+4-h/2+20;b.fillStyle="rgba(255,255,255,0.55)",b.strokeStyle="rgba(255,255,255,0.8)",b.fillText("+5",e,l),b.strokeText("+5",e,l)}b.globalAlpha=1}for(let e=0;e<v;e++)for(let l=0;l<y;l++){let r=ul(l,e,w,x,72);if(fe[e]&&fe[e][l]){const n=t[fe[e][l]];b.drawImage(ve,n.x,n.y,n.s,n.s,r[0]-72+32-2,r[1]-72+32-2,68,68)}}for(let e=0;e<Ee.length;e++){let l=Ee[e],t=ul(l.x,l.y,w,x,72);l.startDate||(l.startDate=new Date),t[0]-=40,t[1]-=40;let r=[255,255,255];switch(hl(l.type)){case"red":r=[255,0,0];break;case"blue":r=[0,140,255];break;case"yellow":r=[255,255,40];break;case"green":r=[0,180,0];break;case"orange":r=[255,130,0];break;case"purple":r=[200,0,255]}b.fillStyle="rgba("+r.join(",")+","+Math.max(0,1-(new Date-l.startDate)/800)/2+")";const n=72*(l.isVertical?v:y),o=Math.min(((new Date-l.startDate)/800)**1.3*1e3,n);if(l.isVertical)b.fillRect(t[0],x+o/2,72,n-o);else if(l.isRadial){const e=Math.max(0,120-o/5+(l.isBig?72:0));b.beginPath(),b.arc(t[0]+32,t[1]+32,e,0,2*Math.PI),b.fill()}else b.fillRect(w+o/2,t[1],n-o,72);new Date-l.startDate>600&&(Ee=Ee.filter((e=>e.id!==l.id)))}}(),(Q>0||W&&L>0)&&function(){if(0==_.swipeStatus)_.held&&(_.swipeFrom=_.down,_.swipeStatus++);else if(1==_.swipeStatus)_.held||(_.swipeTo=_.up,_.swipeStatus++);else if(2==_.swipeStatus&&q){_.swipeStatus=0;let e=_.swipeTo[0]-_.swipeFrom[0],l=_.swipeTo[1]-_.swipeFrom[1];if(Math.abs(e)**2+Math.abs(l)**2<1600)return void(_.swipeStatus=0);ge=xe,Math.abs(e)>Math.abs(l)?ol(e>=0?1:-1,0):ol(0,l>=0?1:-1),_.swipeFrom=[0,0],_.swipeTo=[0,0]}}(),we=Se,Je(),W&&q&&ae&&L>0){let e=new Date-J;L-=e/1e3,L<0&&(L=0)}if(oe)if(H||0===H){let e=new Date-oe;const l=900,r=600,n=(o-l)/2,a=-(Math.max(0,1e3-e)**1.3)+(s-r)/2;b.beginPath(),b.roundRect(n,a,l,r,30),b.fillStyle="rgba(255,255,255,0.6)",b.fill(),b.font="bold 50px Segoe UI Semibold",b.fillStyle="black",b.textAlign="center",b.fillText("Level "+je+" Complete!",640,a+70),b.font="bold 80px Segoe UI Semibold",b.fillText("Score:",640,a+190),b.fillText(le,640,a+280),b.font="bold 70px Segoe UI Semibold";const i=400,c=640-i/2+25,f=a+r-150+20;b.drawImage($e,128,0,256,64,c,f,i,i/4),b.fillText("Continue",640,a+r-100+50);for(let e=0;e<3;e++){const l=t["star"+(le>=R[e]?3-e:"Disabled")];b.drawImage(ve,l.x,l.y,l.s,l.s,640+-90*(1-e)-30,a+r-250,85,85)}if(new Date-oe>500&&_.held&&_.down[0]>c&&_.down[1]>f&&_.down[0]<c+i&&_.down[1]<f+i/4){ne=!0,Ve=!1,Pe=!1;let e=Te;je==Te.reachedLevel&&e.reachedLevel++,e.scores.length<je?e.scores.push(le):e.scores[je-1]<=le&&(e.scores[je-1]=le);try{localStorage.setItem("circle.match.save",JSON.stringify(e))}catch(e){S||console.warn("Without cookies, this game won't be able to save progress. Allow cookies to save progress!"),S=!0}}}else{let e=new Date-oe;const l=900,t=600,r=(o-l)/2,n=-(Math.max(0,1e3-e)**1.3)+(s-t)/2;b.beginPath(),b.roundRect(r,n,l,t,30),b.fillStyle="rgba(255,220,220,0.6)",b.fill(),b.font="bold 50px Segoe UI Semibold",b.fillStyle="black",b.textAlign="center",b.fillText("Level "+je+" Failed!",640,n+70);const a=(W?"You didn't satisfy all goals\n and ran out of time!":"You didn't satisfy all goals\n and ran out of moves!").split("\n");for(let e=0;e<a.length;e++)b.fillText(a[e],640,n+190+60*e);b.font="bold 40px Segoe UI Semibold",b.font="bold 70px Segoe UI Semibold";const i=400,c=640-i/2+25,f=n+t-150+20;b.drawImage($e,128,0,256,64,c,f,i,i/4),b.fillText("End Game",640,n+t-100+50),new Date-oe>500&&_.held&&_.down[0]>c&&_.down[1]>f&&_.down[0]<c+i&&_.down[1]<f+i/4&&(ne=!0,Ve=!1,Pe=!1)}}}else if(ne){b.fillStyle="#88ccff",b.fillRect(0,0,o,s),b.font="80px Segoe UI Semibold",b.textAlign="center";const e=100,l=-10;_.move&&_.move[1]>e&&_.move[1]<620&&_.held&&(Le-=1.25*(_.move[1]-We)),_.move&&_.move[1]>e&&_.move[1]<620&&(We=_.move[1]),!_.held&&Le>l&&(Le+=.1*(l-We));const r=-210*Math.ceil(30)-20;!_.held&&Le<r&&(Le+=.1*(r-Le));for(let l=0;l<c;l++){const r=140;let n=_e[l];n&&"#666666"!==n||(n=["#666666"]);let o=n.map((e=>{let l=(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]);var t;return l[0]=l[0]/2,l[1]=l[1]/2,l[2]=l[2]/2,l}));o="rgb("+o.join(",")+",1)";const a=(l%5*1.5+.5)*r+77,i=210+1.5*Math.floor(l/5)*r+Le;if(Math.abs(i)>1e3)continue;b.save(),b.translate(a+r/2,i+r/2),_.move[0]>a&&_.move[0]<a+r&&_.move[1]>i&&_.move[1]<i+r&&Ue[l]>=0?(Ue[l]+=.2*(1-Ue[l]),_.justDown&&_.up&&_.move[1]>e&&_.move[1]<620&&_.held&&Re>20&&Te.reachedLevel>l&&_e[l][0]!==p&&(Pe=!0,gl(l+1).then((e=>{xe=e,Ve=!0,Je()})))):Ue[l]-=.2*Ue[l];const c=0===De[l][1];b.scale(1+.25*Ue[l],1+.25*Ue[l]),c&&b.rotate(Math.PI/2),b.translate(-a-r/2,-i-r/2);const f=r/1.75;for(let e=0;e<n.length;e++){let l=e/n.length,t=l+1/n.length;b.beginPath(),b.moveTo(a+7*f/8,i+7*f/8),b.fillStyle=n[e],b.arc(a+7*f/8,i+7*f/8,f,l*(2*Math.PI),t*(2*Math.PI)),b.lineTo(a+7*f/8,i+7*f/8),b.fill(),b.strokeStyle="rgba(0,0,0,0.4)",b.beginPath();const r=5;b.arc(a+7*f/8,i+7*f/8,f-r,l*(2*Math.PI),t*(2*Math.PI)),b.stroke()}if(c&&(b.translate(a+r/2,i+r/2),b.rotate(Math.PI/-2),b.translate(-a-r/2,-i-r/2)),b.fillStyle=o,b.font="114px Noto Sans",b.fillStyle="rgba(0,0,0,0.8)",l+1>Te.reachedLevel)b.drawImage($e,1024+(De[l][1]>1?128:0),64,128,128,a+10,i+10,120,120),b.fillStyle="rgba(0,0,0,0.4)",b.arc(a+7*f/8,i+7*f/8,f-5,0,2*Math.PI),b.fill();else{De[l][1]>1&&(b.fillStyle="rgba(255,255,255,0.85)"),l>=99&&(b.font="86px Noto Sans");let e=0;l>=99&&(e-=8),b.fillText(String(l+1),a+r/2,i+3*r/4+5+e)}if(b.translate(a+r/2,i+r/2),b.rotate(.1*Math.PI),b.translate(-a-r/2,-i-r/2),l+1<=Te.reachedLevel){const e=Te.scores[l]||0,n=(De[l]||[[1/0,1/0,1/0]])[0];let o=t["star"+(e>=n[0]?"3":"Disabled")];b.drawImage(ve,o.x,o.y,o.s,o.s,a+20,i+r-24,64,64),b.translate(a+r/2,i+r/2),b.rotate(-.2*Math.PI),b.translate(-a-r/2,-i-r/2),o=t["star"+(e>=n[2]?"1":"Disabled")],b.drawImage(ve,o.x,o.y,o.s,o.s,a+56,i+r-24,64,64),b.translate(a+r/2,i+r/2),b.rotate(.1*Math.PI),b.translate(-a-r/2,-i-r/2),o=t["star"+(e>=n[1]?"2":"Disabled")],b.drawImage(ve,o.x,o.y,o.s,o.s,a+38,i+r-24,64,64),b.fillStyle="rgba(0,0,0,0.6)",b.textAlign="center",b.font="30px Segoe UI",b.fillText(e||"",a+r/2,i+r+30)}b.restore(),b.lineWidth=10,b.fillStyle="#c0f3ff",b.strokeStyle="#0082ab",b.fillRect(-100,s-e,1480,e+100),b.strokeRect(-100,s-e,1480,e+100),b.fillStyle="rgba(0,0,0,0.8)",b.fillStyle="#c0f3ff",b.strokeStyle="#0082ab",b.fillRect(-100,-100,1480,100+e),b.strokeRect(-100,-100,1480,100+e),b.fillStyle="rgb(0,0,0,0.8)",b.fillText("Level Select",640,90),b.drawImage($e,0,0,128,64,20,635,150,75),b.fillStyle="rgb(0,0,0,0.65)",b.font="30p",b.fillText("◀",85,700),_.down&&_.down[0]>20&&_.down[0]<170&&_.down[1]>635&&_.down[1]<710&&(_.held?ne=!1:b.globalAlpha=.9)}}else b.fillStyle="#88ccff",b.fillRect(0,0,o,s),b.drawImage($e,0,0,128,64,500,300,300,150),b.drawImage($e,128,0,224,64,390,500,525,150),b.fillStyle="rgba(0,0,0,0.9)",b.textAlign="center",b.font="170px Segoe UI Semibold",_.justDown&&_.down&&_.down[0]>500&&_.down[0]<800&&_.down[1]>300&&_.down[1]<450&&(_.held?(Pe=!0,gl(Te.reachedLevel).then((e=>{xe=e,Ve=!0,Je()}))):b.globalAlpha=.9),_.down&&_.down[0]>390&&_.down[0]<915&&_.down[1]>500&&_.down[1]<650&&(_.held?(ne=!0,Le=-1.5*Math.floor((Te.reachedLevel-1)/5)*140+700,Re=0):b.globalAlpha=.9),b.font="80px Segoe UI Semibold",b.drawImage($e,0,64,1024,128,50,50,1200,150),b.globalAlpha=1,b.fillText("Play",650,400),b.globalAlpha=1,b.fillText("Level Select",650,600);Re++,_.justDown=!1,J=new Date,requestAnimationFrame(ze)}function Je(){let e=[];K=[];let l=!1;for(let t=0;t<v;t++)for(let r=0;r<y;r++){let n=hl(xe[t]?.[r]);n&&("none"===n&&(n=null),r>1&&xe[t][r-1]&&xe[t][r-2]&&hl(xe[t][r-1])===n&&hl(xe[t][r-2])===n&&(e.push([t,r,!0],[t,r-1,!0],[t,r-2,!0]),l=!0,K.push([t,r,!1,n],[t,r-1,!1,n],[t,r-2,!1,n])),t>1&&xe[t-1][r]&&xe[t-2][r]&&hl(xe[t-1][r])===n&&hl(xe[t-2][r])===n&&(e.push([t,r,!0],[t-1,r,!0],[t-2,r,!0]),l=!0,K.push([t,r,!0,n],[t-1,r,!0,n],[t-2,r,!0,n])))}let t=[];const r=(e,l)=>K.some((t=>t[0]===l&&t[1]==e)),n=(e,l)=>K.filter((t=>t[0]===l&&t[1]==e))[0]?.[3],o=(e,l)=>K.filter((t=>t[0]===l&&t[1]===e&&t[2])).length>0,a=(e,l)=>K.filter((t=>t[0]===l&&t[1]===e&&!t[2])).length>0;for(let l=0;l<v;l++)for(let s=0;s<y;s++)if(r(s,l)&&!t.some((e=>e[1]===s&&e[0]===l))){let i=s+1;const c=n(s,l);let f=1,h=[],u=[];for(;n(i,l)===c&&r(i,l);)h.push([l,i++]),f++;t=t.concat(h),u=h;let d=l+1,p=1;for(h=[];n(s,d)===c&&r(s,d);)h.push([d++,s]),p++;if(t=t.concat(h),u=u.concat(h),f>=5)C.push({x:s+2,y:l,type:"rainbowCircle"});else if(p>=5)C.push({x:s,y:l+2,type:"rainbowCircle"});else{let t=null;for(let e=0;e<u.length;e++){let l=u[e];if(o(l[1],l[0])&&a(l[1],l[0])){t=[l[0],l[1]];break}}if(t)C.push({x:t[1],y:t[0],type:c+"RSCircle"}),e=e.filter((e=>e[1]!==t[1]||e[0]!==t[0]));else if(4===f){const t=ye[0]<=s+3&&ye[0]>=s?ye[0]:Math.random()>.5?s+1:s+2;C.push({x:t,y:l,type:c+"VSCircle"}),e=e.filter((e=>e[1]!==t||e[0]!==l))}else if(4===p){const t=ye[1]<=l+3&&ye[1]>=l?ye[1]:2*Math.random()>1?l+1:l+2;C.push({x:s,y:t,type:c+"HSCircle"}),e=e.filter((e=>e[1]!==s||e[0]!==t))}}}if(me&&new Date-me>200&&tl(),X=e,me&&new Date-me>500){if(E){E=!1;let l="rainbowCircle"===xe[be[1]][be[0]]?be:ye,t="rainbowCircle"!==xe[be[1]][be[0]]?be:ye;if(xe[l[1]][l[0]]=null,xe[t[1]][t[0]]){let r,n,o;switch(ce[l[1]][l[0]]>0&&el(l[0],l[1]),ce[t[1]][t[0]]>0&&el(t[0],t[1]),pl("rainbow_circle",l[0],l[1],"rainbowCircle"),Ke(5e3,l[0],l[1]),xe[t[1]][t[0]].slice(-8)){case"owCircle":if("yellowCircle"!==xe[t[1]][t[0]]){for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)e.push([l,t]);Ze(e),e=[];break}case"HSCircle":case"VSCircle":if("yellowCircle"!==xe[t[1]][t[0]]){pl("striped_circle",t[0],t[1],xe[t[1]][t[0]]),r=hl(xe[t[1]][t[0]]),o=[],n=0,xe[t[1]][t[0]]=null;for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)if(r===hl(xe[l][t])){!xe[l][t].endsWith("ExtraTimeCircle")||W&&L<=0||(L=Math.min(U,L+5)),xe[l][t]=r+"A"+(Math.random()>.5?"H":"V")+"SCircle",n++;let o=setInterval((()=>{for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)if((xe[l][t]==r+"AVSCircle"||xe[l][t]==r+"AHSCircle")&&!e.some((e=>e[0]===l&&e[1]===t)))return e.push([l,t]),Ze(e),e=[],void tl();clearInterval(o)}),750*n+500)}break}case"RSCircle":if("yellowCircle"!==xe[t[1]][t[0]]){pl("radial_circle",t[0],t[1],xe[t[1]][t[0]]),r=hl(xe[t[1]][t[0]]),o=[],n=0,xe[t[1]][t[0]]=null;for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)r===hl(xe[l][t])&&(xe[l][t]=r+"ARSCircle",xe[l][t].endsWith("ExtraTimeCircle")&&(L=Math.min(U,L+5)),n++,setInterval((()=>{for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)if(xe[l][t]==r+"ARSCircle"&&!e.some((e=>e[0]===l&&e[1]===t)))return e.push([l,t]),Ze(e),e=[],rl(),void tl();tl()}),750*n+500))}default:let l=hl(xe[t[1]][t[0]]);if("none"!=l){for(let t=0;t<xe.length;t++)for(let r=0;r<xe[0].length;r++)hl(xe[t][r])==l&&e.push([t,r,!0]);Ze(e),e=[]}}}}if(P){let l=xe[be[1]][be[0]],t=xe[ye[1]][ye[0]];xe[be[1]][be[0]]=null,xe[ye[1]][ye[0]]=null;let r=hl(l),n=hl(t);switch(pl(r+"_circle",be[0],be[1],l),pl(n+"_circle",ye[0],ye[1],t),P){case"SS":Ke(2500,(be[0],ye[0]),(be[1],ye[1]));for(let l=0;l<xe[0].length;l++)e.push([ye[1],l]);Ee.push({x:ye[0],y:ye[1],isVertical:!1,isRadial:!1,id:re++,type:l});for(let l=0;l<xe[0].length;l++)e.push([l,ye[0]]);Ee.push({x:ye[0],y:ye[1],isVertical:!0,isRadial:!1,id:re++,type:t}),pl("striped_circle",be[0],be[1],t),pl("striped_circle",ye[0],ye[1],l);break;case"SR":Ke(3500,(be[0],ye[0]),(be[1],ye[1]));for(let t=ye[1]-1;t<ye[1]+2;t++)if(!(t<0||t>xe.length-1)){for(let l=0;l<xe[0].length;l++)e.push([t,l]);Ee.push({x:ye[0],y:t,isVertical:!1,isRadial:!1,id:re++,type:l})}for(let l=ye[0]-1;l<ye[0]+2;l++)if(!(l<0||l>xe[0].length-1)){for(let t=0;t<xe.length;t++)e.push([t,l]);Ee.push({x:l,y:ye[1],isVertical:!0,isRadial:!1,id:re++,type:t})}"RSCircle"===l.slice(-8)?(pl("striped_circle",be[0],be[1],t),pl("radial_circle",ye[0],ye[1],l)):(pl("radial_circle",be[0],be[1],t),pl("striped_circle",ye[0],ye[1],l));break;case"RR":Ke(4500,(be[0],ye[0]),(be[1],ye[1]));for(let l=ye[1]-2;l<ye[1]+3;l++)if(!(l<0||l>xe.length-1))for(let t=ye[0]-2;t<ye[0]+3;t++)!xe[l][t]||t===ye[0]&&l===ye[1]||e.push([l,t]);Ee.push({x:ye[0],y:ye[1],isVertical:!1,isRadial:!0,isBig:!0,id:re++,type:l}),pl("radial_circle",be[0],be[1],l),pl("radial_circle",ye[0],ye[1],t)}Ze(e),e=[],P=null}ke=!1,setInterval((()=>{nl(xe)||ke||(!(Q>0||W&&L>0)||T)&&A||(q=!0)}),100),Ze(e),e=[],tl()&&rl()}if(me&&new Date-me>700&&(B=ll(),A&&(T||!W&&Q<1)&&(q=!1),rl(),il(xe)||(console.log("SHUFFLE!"),setTimeout((()=>{}),500))),O&&new Date-O>300||W&&new Date-se>1e3){B=ll(),se=new Date;let l=tl();l||0===ie.length||(O=null,D&&A&&(T||!W&&Q<1||W&&Q<1)||!A&&Ae.some((e=>"score"===e.type))&&!W&&Q<1?(q=!1,H||0===H||(Ae.some((e=>"score"===e.type))&&(!W&&Q<1||W&&Q<1)&&!A||(H=W?L:Q),setTimeout((()=>{!function(e){if(Me=!0,W)for(let e=0;e<xe.length;e++)for(let l=0;l<xe[0].length;l++)xe[e]?.[l]&&xe[e]?.[l].endsWith("ExtraTimeCircle")&&(xe[e][l]=hl(xe[e]?.[l])+"RSCircle");for(let e=0;e<(W?Math.ceil(H/5):H);e++)setTimeout((()=>{W?L-=L>5?5:L:Q--;let e=null,l=null,t=0;for(;(!e||"none"===hl(xe[l][e])||"HSCircle.VSCircle.RSCircle".split(".").includes(xe[l][e].slice(-8)))&&t<1e3;)l=Math.floor(Math.random()*xe.length),e=Math.floor(Math.random()*xe[0].length),t++;let r=!1;if(t<1e3){const t="R.H.V".split(".")[Math.floor(3*Math.random())];xe[l][e]=hl(xe[l][e])+t+"SCircle",r=!0}le+=3e3}),200*(e+1));setTimeout((()=>{L=0;let l=!0,t=setInterval((()=>{He&&pe<6?pe++:clearInterval(this)}),1e4),r=setInterval((()=>{if(te<2||X.length>0){e=e.concat(X),l=!1;let n=0;e:for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++)if(("rainbowCircle"===xe[l]?.[t]||"none"!==hl(xe[l][t])&&"HSCircle.VSCircle.RSCircle".split(".").includes(xe[l][t].slice(-8)))&&(e.push([l,t]),n++,n>1))break e;nl(xe)||0!==n||oe?(O=new Date,nl(xe)&&new Date-me>2e3&&(me=new Date),Ze(e),e=[],qe=0):qe++,qe>21&&(A?(Ce=!0,oe=new Date,!Ae.some((e=>"score"===e.type))&&le<R[0]&&(le=R[0])):Qe(),clearInterval(r),clearInterval(t)),Ze(e),e=[]}}),300)}),200*(W?Math.ceil(H/5):H)+400)}(e),e=[]}),1e3))):Ce||!(!W&&Q<1||W&&L<=0)||A||Ae.some((e=>"score"===e.type))&&!W||l||setTimeout((()=>{Qe()}),1e3)),te=0}}$e.src=n;let Ge,Xe,qe=0;function Ke(e,l,t){le+=e}function Qe(){H=null,Ce=!0,oe=new Date}function Ze(e){e.length>0&&(te++,le+=60*te);let l=0;for(;e.length>0&&l<1e3;){l++;for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++){let r=e.filter((e=>e&&e[0]===l&&e[1]===t));if(r.length>0){let l=r[0],t=r[0][1],n=r[0][0],o=!!r[0][2];!xe[n]?.[t]&&ce[n][t]>0&&el(t,n);let a=!1;B=ll(),tl()&&(rl(),rl());let s=xe[n][t];if(!fe[n]?.[t]&&xe[n]&&xe[n][t]&&"yellowCircle"!==xe[n][t])switch(xe[n][t].slice(-8)){case"owCircle":let l=i[Math.floor(Math.random()*pe)];for(let t=0;t<xe.length;t++)for(let r=0;r<xe[0].length;r++)hl(xe[t][r])==l&&e.push([t,r,!0]);break;case"HSCircle":for(let l=0;l<xe[0].length;l++)e.push([n,l]);Ee.push({x:t,y:n,isVertical:!1,isRadial:!1,id:re++,type:s});break;case"VSCircle":for(let l=0;l<xe.length;l++)e.push([l,t]);Ee.push({x:t,y:n,isVertical:!0,isRadial:!1,id:re++,type:s});break;case"RSCircle":let r=dl(xe[n]?.[t],t,n,fe[n][t]);xe[n][t]=r,a=!0,ce[n][t]>0&&el(t,n),xe[n-1]&&xe[n-1][t-1]&&e.push([n-1,t-1,!0]),xe[n-1]&&xe[n-1][t]&&e.push([n-1,t,!0]),xe[n-1]&&xe[n-1][t+1]&&e.push([n-1,t+1,!0]),xe[n][t-1]&&e.push([n,t-1,!0]),xe[n][t+1]&&e.push([n,t+1,!0]),xe[n+1]&&xe[n+1][t-1]&&e.push([n+1,t-1,!0]),xe[n+1]&&xe[n+1][t]&&e.push([n+1,t,!0]),xe[n+1]&&xe[n+1][t+1]&&e.push([n+1,t+1,!0]),Ee.push({x:t,y:n,isVertical:!1,isRadial:!0,id:re++,type:s})}if(xe[n]&&"none"!==xe[n][t]){let e;e=dl(xe[n][t],t,n,fe[n][t],0,o),a||(xe[n][t]=e),e&&xe[n][t]||!(ce[n][t]>0)||el(t,n)}e=e.filter((e=>e[0]!==n||e[1]!==t)),B=B.filter((e=>e.tileX!==l[1]||e.tileY!==l[0]))}}}!function(){let e=[];for(let l=0;l<C.length;l++){let t=C[l];e.some((e=>e.x===t.x&&e.y===t.y&&e.type===t.type))||(xe[t.y][t.x]=t.type,["HSCircle","VSCircle"].includes(t.type.slice(-8))&&pl(hl(t.type)+"_circle",t.x,t.y,hl(t.type)+"Circle"),e.push(t))}C=[]}(),tl(),rl()}function el(e,l){ce[l][e]--,Ke(1e3,(be[0],ye[0]),(be[1],ye[1]),ce[l][e]),pl("button",e,l,"button"+(ce[l][e]+1))}function ll(){let e=[];for(let l=0;l<xe.length;l++)for(let t=0;t<xe[0].length;t++){let r=ul(t,l,w,x,72);e.push({type:xe[l][t],x:r[0]-32,y:r[1]-32,tileX:t,tileY:l,id:j++})}return e}function tl(){let e=!1;for(let l=v-1;l>=0;l--)for(let t=0;t<y;t++)if(!xe[l][t])if(he[l][t][1]){let e=null;for(let r=0;r<he[0].length;r++)for(let n=0;n<he.length;n++)he[n]?.[r]?.[0]===he[l][t][1]&&(e=[r,n]);e&&ml(xe[e[1]][e[0]],e[0],e[1])&&(xe[l][t]=xe[e[1]][e[0]],xe[e[1]][e[0]]=null,rl())}else{let r=!1;if(ie.some((e=>e[0]===t&&e[1]===l))||(r=!0),de[l][t].length>0){let n=Math.random()>.5?de[l][t]:de[l][t].slice().reverse();for(let o of n){let n="watermelon".split(".").includes(o),a=0;if("globe"===o)a=xe.flat().filter((e=>"globe,globeHolder".split(",").includes(e))).length;else if("vertical_striped_circle,horizontal_striped_circle,radial_circle".split(",").includes(o))a=xe.flat().filter((e=>e&&e.slice(-8)===o[0].toUpperCase()+"SCircle")).length;else if(n)for(let e=0;e<10;e++)a+=xe.flat().filter((l=>l===o+String(e))).length;else a=xe.flat().filter((e=>e===o)).length;let s=N.filter((e=>e.type===o))[0];if(s&&s.max){console.log(a);let n=!0;if("vertical_striped_circle,horizontal_striped_circle,radial_circle".split(",").includes(o)&&Me&&(n=!1),"globe"===o&&Ae.some((e=>"globe"===e.type))&&a>=Ae.filter((e=>"globe"===e.type))[0].amount-Z.globe&&(n=!1),a<s.max&&n){const n=i[Math.floor(Math.random()*pe)],a={watermelon:"watermelon"+(s.layer||1),globe:"globe",vertical_striped_circle:n+"VSCircle",horizontal_striped_circle:n+"HSCircle",radial_circle:n+"RSCircle"};xe[l][t]=a[o],console.log(a[o]),r=!0,e=!0}}}}r||(xe[l][t]=I[Math.floor(Math.random()*pe)],e=!0)}return e&&(rl(),tl()),e}function rl(e){Se=[];let l=!1;G=!1;for(let e=0;e<2;e++){for(let e=xe.length-1;e>=0;e--){for(let t=0;t<xe[0].length;t++){if(!xe[e][t]||"none"===xe[e][t])continue;let r=e,n=t;if(ml(xe[r][n],n,r))for(;r<xe.length-1&&!xe[r+1][n]&&"none"!==xe[r+1][n];)l=!0,r++;let o=xe[e][t];xe[e][t]=null,xe[r][n]=o,B.filter((l=>l.tileX===t&&l.tileY===e))[0]}for(let t=0;t<xe[0].length;t++){if(!xe[e][t]||"none"===xe[e][t])continue;let r=e,n=t,o=xe[r][n];if(G&&ml(o,n,r)&&!xe[r+1]?.[n-1])for(;n>0&&(!xe[r+1]||xe[r+1][n])&&xe[r+1]&&!xe[r+1]?.[n-1];)for(n--,r++,l=!0;r<xe.length-1&&!xe[r+1][n]&&"none"!==xe[r+1][n];)r++;if(G&&ml(o,n,r)&&!xe[r+1]?.[n+1])for(;n<xe[0].length-1&&(!xe[r+1]||xe[r+1][n])&&xe[r+1]&&!xe[r+1]?.[n+1];)for(n++,r++,l=!0;r<xe.length-1&&!xe[r+1][n]&&"none"!==xe[r+1][n];)r++;let a=xe[e][t];xe[e][t]=null,xe[r][n]=a,"globe"===a&&!fe[e][t]&&ue.some((e=>e[0]===n&&e[1]===r))&&(pl("globe",n,r,"globe"),Ke(1e4),xe[r][n]=null)}}G=!0}nl(xe)&&(l=!0,me=new Date),l?me=new Date:(me=null,O=new Date)}function nl(e){let l=!1;for(let t=0;t<e.length;t++)e:for(let r=0;r<e[0].length;r++){if("none"===hl(e[t][r]))continue e;let n=sl(r,t,e[t][r],e);(r<0||t<0||r>=e[0].length||t>=e.length)&&(n=!1),n&&(l=!0)}for(let t=0;t<e[0].length;t++)e:for(let r=0;r<e.length;r++){if("none"===hl(e[r][t]))continue e;let n=sl(t,r,e[r][t],e);(t<0||r<0||t>=e[0].length||r>=e.length)&&(n=!1),n&&(l=!0)}return l}function ol(e,l){if(ge=xe,be=function(e,l,t,r,n){return[Math.round((e-t-32)/72),Math.round((l-r-32)/72)]}(_.down[0],_.down[1],w,x),ul(be[0],be[1],w,x,72),ye=[be[0]+e,be[1]+l],be&&be[0]>=0&&be[1]>=0&&be[0]<y&&be[1]<v&&ye&&ye[0]>=0&&ye[1]>=0&&ye[0]<y&&ye[1]<v){let e=xe,l=e[be[1]][be[0]];e[be[1]][be[0]]=e[ye[1]][ye[0]],e[ye[1]][ye[0]]=l;let t=!1;for(let l=0;l<e.length;l++)for(let r=0;r<e[0].length;r++)sl(r,l,e[l][r],e)&&(t=!0);let r=e[be[1]][be[0]],n=e[ye[1]][ye[0]];("rainbowCircle"!==r||"none"===hl(n)&&"rainbowCircle"!==n)&&("rainbowCircle"!==n||"none"===hl(r)&&"rainbowCircle"!==r)?E=!1:(E=!0,t=!0);let o=r?.slice(-8),a=n?.slice(-8);"VSCircle"===o||"HSCircle"===o?P="RSCircle"===a?"SR":"VSCircle"===a||"HSCircle"===a?"SS":null:"RSCircle"===o&&(P="RSCircle"===a?"RR":"VSCircle"===a||"HSCircle"===a?"SR":null),P&&(t=!0),(u.includes(e[be[1]][be[0]])||u.includes(e[ye[1]][ye[0]]))&&(t=!1),(fe[be[1]][be[0]]||fe[ye[1]][ye[0]])&&(t=!1),t?(ae=!0,q=!1,me=new Date,ke=!0,Q--,V=new Date):(xe[ye[1]][ye[0]]=xe[be[1]][be[0]],xe[be[1]][be[0]]=l)}}function al(e,l,t){let r;for(B=[],Ge=0;(0===Ge||!il(r))&&Ge<=6e5;){r=[];for(let n=0;n<l;n++){let l=[];for(let t=0;t<e;t++)l.push(null);r.push(l);for(let l=0;l<e;l++){let e=I[Math.floor(Math.random()*t)];r[n][l]=e;let o=0;for(;sl(l,n,e,r)&&o<=15;)o++,e=I[Math.floor(Math.random()*t)],r[n]&&r[n][l]&&(r[n][l]=e)}}Ge++}return r}function sl(e,l,t,r){let n=hl(t);return!!("none"!==n&&(e>1&&r[l]&&r[l][e-1]&&r[l][e-2]&&hl(r[l][e-1])===n&&hl(r[l][e-2])===n||l>1&&r[l-1]&&r[l-1][e]&&r[l-2][e]&&hl(r[l-1][e])===n&&hl(r[l-2][e])===n))}function il(e){Xe=[...e];let l=!1;const t=[e=>{for(let l=0;l<Xe.length;l++)for(let t=0;t<Xe[0].length-1;t++){let r=Xe[l][t],n=Xe[l][t+1];Xe[l][t]=n,Xe[l][t+1]=r;for(let o=0;o<Xe.length;o++)for(let a=0;a<Xe[0].length;a++)sl(a,o,Xe[o][a],Xe)&&(Xe[l][t]=r,Xe[l][t+1]=n,e())}},e=>{for(let l=0;l<Xe.length-1;l++)for(let t=0;t<Xe[0].length;t++){let r=Xe[l][t],n=Xe[l+1][t];Xe[l][t]=n,Xe[l+1][t]=r;for(let o=0;o<Xe.length;o++)for(let a;a<Xe[0].length;a++)Xe[l][t]=r,Xe[l+1][t]=n,sl(a,o,Xe[o][a],Xe)&&e()}}];return Math.random>.5&&t.reverse(),t[0]((()=>{l=!0})),t[1]((()=>{l=!0})),l}async function cl(e){try{let l=await a(8760)(`./levels/${e}.json`);return[l.targets,l&&l.hard||0]}catch(e){return[[1/0,1/0,1/0],levelData&&levelData.hard||0]}}async function fl(e){try{let l=await a(8760)(`./levels/${e}.json`);const t=l.goals,r=l.hard||0;if(r>0){if(1===r)return["#ff8f2e","#ff7700","#bb5500"];if(2===r)return["#ff2222","#ab0e0e","#730000"];if(3===r)return["#333333","#222222","#111111"]}let n=[];l.time&&!l.moves&&n.push(t.some((e=>"score"===e.type))?"#cc11ff":"#9900ff");for(let e=0;e<t.length;e++){const r=t[e];switch("score"===r.type?n.push("moves"):"button"===r.type?n.push("button"):"globe"===r.type?n.push("globe"):n.push("order"),n[n.length-1]){case"moves":l.time||(n[n.length-1]="#ff5555");break;case"button":n[n.length-1]="#66aaff";break;case"order":n[n.length-1]="#ff44ee";break;case"globe":n[n.length-1]="#00ffbb"}}return n=n.filter(((e,l)=>n.indexOf(e)===l&&"moves"!==e)),n}catch(e){return[p]}}function hl(e){return e&&i.filter((l=>e.toLowerCase().includes(l)))[0]||"none"}function ul(e,l,t,r,n){return[t+e*n+32,r+l*n+32]}function dl(e,l,t,r,n,o){if(!e)return null;let a;if(r){a=e;let n=null;switch(r){case"drain2":n="drain1";break;case"bubble2":n="bubble1";break;case"bubble3":n="bubble2"}!A&&!W&&Q<1&&Me&&(n=r),fe[t][l]=n}else{switch(e){case"none":a="none";break;case"metalBall1":case"watermelon1":default:a=null;break;case"metalBall2":a="metalBall1";break;case"metalBall3":a="metalBall2";break;case"metalBall4":a="metalBall3";break;case"metalBall5":a="metalBall4";break;case"metalBall6":a="metalBall5";break;case"watermelon2":a="watermelon1";break;case"watermelon3":a="watermelon2";break;case"globe":a=e;break;case"globeHolder":a="globe"}e&&e.startsWith("metalBall")&&(Ke(40),pl("metal_ball",l,t,e)),e&&e.startsWith("watermelon")&&(Ke(30),pl("watermelon",l,t,e)),"none"!==hl(e)?(pl(hl(e)+"_circle",l,t,hl(e)+"Circle"),(e.endsWith("HSCircle")||e.endsWith("VSCircle"))&&(Ke(1e3),pl("striped_circle",l,t,e)),e.endsWith("RSCircle")&&(Ke(2e3),pl("radial_circle",l,t,e)),e.endsWith("ExtraTimeCircle")&&!Me&&(Ke(1e3),L=Math.min(U,L+5))):"rainbowCircle"===e&&(Ke(5e3),pl("rainbow_circle",l,t,e)),"none"!==hl(e)&&(o&&(xe[t+1]?.[l]&&!fe[t+1][l]&&xe[t+1][l].startsWith("metalBall")&&(xe[t+1][l]=dl(xe[t+1][l],l,t+1)),xe[t-1]?.[l]&&!fe[t-1][l]&&xe[t-1][l].startsWith("metalBall")&&(xe[t-1][l]=dl(xe[t-1][l],l,t-1)),xe[t]&&!fe[t][l+1]&&xe[t][l+1]?.startsWith("metalBall")&&(xe[t][l+1]=dl(xe[t][l+1],l+1,t)),xe[t]&&!fe[t][l-1]&&xe[t][l-1]?.startsWith("metalBall")&&(xe[t][l-1]=dl(xe[t][l-1],l-1,t)),xe[t+1]?.[l]&&!fe[t+1][l]&&xe[t+1][l].startsWith("watermelon")&&(xe[t+1][l]=dl(xe[t+1][l],l,t+1)),xe[t-1]?.[l]&&!fe[t-1][l]&&xe[t-1][l].startsWith("watermelon")&&(xe[t-1][l]=dl(xe[t-1][l],l,t-1)),xe[t]&&!fe[t][l+1]&&xe[t][l+1]?.startsWith("watermelon")&&(xe[t][l+1]=dl(xe[t][l+1],l+1,t)),xe[t]&&!fe[t][l-1]&&xe[t][l-1]?.startsWith("watermelon")&&(xe[t][l-1]=dl(xe[t][l-1],l-1,t))),xe[t+1]?.[l]&&fe[t+1][l]?.startsWith("bubble")&&(xe[t+1][l]=dl(xe[t+1][l],l,t+1,fe[t+1][l])),xe[t-1]?.[l]&&fe[t-1][l]?.startsWith("bubble")&&(xe[t-1][l]=dl(xe[t-1][l],l,t-1,fe[t-1][l])),xe[t]&&xe[t][l+1]&&fe[t][l+1]?.startsWith("bubble")&&(xe[t][l+1]=dl(xe[t][l+1],l+1,t,fe[t][l+1])),xe[t]&&xe[t][l-1]&&fe[t][l-1]?.startsWith("bubble")&&(xe[t][l-1]=dl(xe[t][l-1],l-1,t,fe[t][l-1])))}return a}function pl(e,l,t,r,n){n?"button"!==e&&(Z[e]+=n):"button"!==e&&Z[e]++;let o=Ae.filter((l=>l.type===e))[0];if(!o)return;const a="button"===e?ce.flat().reduce(((e,l)=>e+l),0):Z[e];if(g.includes(e))return;let s="button"===e?a>Ie:a>o.amount;"score"===e&&(s=Oe[0]),s||k.push({x:l-1,y:t,type:e,wasTile:r,id:re++})}async function gl(e){A=!1,le=0,R=[1/0,1/0,1/0],D=!1,Me=!1;for(let e in Z)Z[e]=0,ee[e]=0;ee.button=0,G=!1;let l=[];oe=null,H=null,Ce=!1;let t=await a(8760)(`./levels/${e}.json`);if(!t)throw Error(`Level ${e} doesn't exist!`);y=t.width||9,v=t.height||9,w=482+(9-y)/2*72,x=58+(9-v)/2*72,T=t.immediateShowdown??!0,Ne=t.hard||0;let r=0;for(ae=!1;(0===r||nl(l))&&r<1e3;){ce=[],fe=[],he=[];for(let e=0;e<v;e++){let e=[],l=[],t=[];for(let r=0;r<y;r++)e.push([null,null]),l.push(null),t.push(0);fe.push(l),ce.push(t),he.push(e)}if(je=e,Oe=[null,null,null],ie=[],ue=[],!t.colours)throw Error("A colours property wasn't specified in the level JSON.");pe=t.colours,He=!!t.increaseColours,Ae=t.goals,R=t.targets,console.log(y,v);for(let e=0;e<Ae.length;e++)Ae[e].completion=null;l=al(y+2,v,t.colours),l=l.map((e=>e.slice(0,-2))),console.log(y,v,l),ce=[],fe=[],de=[],N=t.cannons||[];for(let e=0;e<v;e++){let e=[];for(let l=0;l<y;l++)e.push(0);ce.push(e),e=[];for(let l=0;l<y;l++)e.push(null);fe.push(e),e=[];for(let l=0;l<y;l++)e.push([]);de.push(e)}if(!t.moves&&!t.time)throw Error("A moves or time property wasn't specified in the level JSON.");if(W=!!t.time,W&&(L=t.time,U=t.time,Q=0),!t.tilemap)throw Error("A tilemap property wasn't specified in the level JSON.");if(Q=t.moves,t.tilemap.length!==v)throw Error("The tilemap must have "+v+" vertical tiles per column.");for(let e=0;e<v;e++){let r=t.tilemap[e].split(",");if(r.length!==y)throw Error("The tilemap must have "+y+" horizontal tiles per row.");for(let t=0;t<r.length;t++){let n=r[t].match(/.{1,2}/g),o=null,a=null;for(let r=0;r<n.length;r++){let s=n[r];switch("T"===s[0]&&(r++,s+=n[r]),s){case"--":l[e][t]="none";break;case"-O":l[e][t]=null;break;case"*S":ie.push([t,e]);break;case"*0":o="blue";break;case"*1":o="green";break;case"*2":o="orange";break;case"*3":o="purple";break;case"*4":o="red";break;case"*5":o="yellow";break;case"*|":a="VS";break;case"*-":a="HS";break;case"*O":a="RS";break;case"*/":l[e][t]="rainbowCircle";break;case"*+":a="ExtraTime";break;case"B1":ce[e][t]=1;break;case"B2":ce[e][t]=2;break;case"B3":ce[e][t]=3;break;case"D1":fe[e][t]="drain1";break;case"D2":fe[e][t]="drain2";break;case"b1":fe[e][t]="bubble1";break;case"b2":fe[e][t]="bubble2";break;case"b3":fe[e][t]="bubble3";break;case"G1":l[e][t]="globe";break;case"G2":l[e][t]="globeHolder";break;case"G-":ue.push([t,e]);break;case"M1":l[e][t]="metalBall1";break;case"M2":l[e][t]="metalBall2";break;case"M3":l[e][t]="metalBall3";break;case"M4":l[e][t]="metalBall4";break;case"M5":l[e][t]="metalBall5";break;case"M6":l[e][t]="metalBall6";break;case"W1":l[e][t]="watermelon1";break;case"W2":l[e][t]="watermelon2";break;case"W3":l[e][t]="watermelon3";break;case"CW":de[e][t].push("watermelon");break;case"CG":de[e][t].push("globe");break;case"C-":de[e][t].push("horizontal_striped_circle");break;case"C|":de[e][t].push("vertical_striped_circle");break;case"CO":de[e][t].push("radial_circle");break;default:if("T"===s[0]){const l=Number(s.slice(1));l%2==1?he[e][t][0]=(l+1)/2:he[e][t][1]=l/2}}}if(o&&!a&&(l[e][t]=o+"Circle"),!o&&a){let r=l[e][t].slice(0,-6);l[e][t]=r+a+"Circle"}o&&a&&(l[e][t]=o+a+"Circle")}}Ie=ce.flat().reduce(((e,l)=>e+l),0),r++}return G=!0,D=!0,l}function ml(e,l,t){return!fe[t][l]&&!h.includes(e)}!function(){for(let e=0;e<c;e++)fl(e+1).then((l=>{_e[e]=l})),cl(e+1).then((l=>{De[e]=l}));m.width=o,m.height=s,m.id="gameCanvas",m.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.backgroundColor="#222222",m.style.position="absolute",document.body.appendChild(m),m.addEventListener("mouseup",F),m.addEventListener("mousedown",Y),m.addEventListener("mousemove",$),m.addEventListener("pointerup",F),m.addEventListener("pointerdown",Y),m.addEventListener("pointermove",$),m.addEventListener("wheel",(e=>{const l=Math.sign(e.deltaY);Le-=60*l})),requestAnimationFrame(ze)}()})()})();